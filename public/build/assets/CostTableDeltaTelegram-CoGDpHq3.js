import{S as _,H as h}from"./SubGroupsTable-EByrvijN.js";import{_ as d,r as p,o as l,c as u,F as T,a as v,b as A,d as y,e as C,h as b,g as i,t as m}from"./app-DNW8_hyV.js";const M={name:"HubSubTable",components:{"sub-groups-table":_},computed:{hubGroups(){return Array.from(this.vueStore.groupsMap).filter(e=>e[1].parentGroupId=="-1").sort((e,n)=>e[1].groupOrder-n[1].groupOrder)}},setup(){return{vueStore:window._vueStore}}},f={key:0,class:"table"};function I(s,e,n,a,t,o){const c=p("sub-groups-table");return a.vueStore.loading==!1?(l(),u("div",f,[(l(!0),u(T,null,v(o.hubGroups,([r,g])=>(l(),A(c,{groupId:g.groupId},null,8,["groupId"]))),256))])):y("",!0)}const S=d(M,[["render",I],["__scopeId","data-v-15abb2b2"]]),R={name:"TableListTelegram",components:{"hub-table":h,"hub-sub-table":S}},k={class:"table_list_body"},P=b('<div class="table_header_wrapper" style="position:relative;top:0px;z-index:0;margin-top:30px;"><div class="table_header"><div class="table_header_item">Категория</div><div class="table_header_item">Расход с НДС</div><div class="table_header_item">Показов</div><div class="table_header_item">Кликов</div></div></div>',1);function D(s,e,n,a,t,o){const c=p("hub-table"),r=p("hub-sub-table");return l(),u("div",k,[C(c),P,C(r)])}const q=d(R,[["render",D]]),N={name:"CostTableTelegram",computed:{statistics(){const s={campaignsTypesList:{},campaignsTypesResult:{Count:0,Cost:0,Clicks:0,Impressions:0,CPC:0,CTR:0}},e=[];for(const[a,t]of this.vueStore.campaignsMap)e.push(t.CampaignType);const n=new Set(e);for(const a of n){const t={Type:a,Count:0,Cost:0,Clicks:0,Impressions:0,CPC:0,CTR:0},o=Array.from(this.vueStore.campaignsMap).filter(c=>c[1].CampaignType==a);for(const[c,r]of o)t.Count++,t.Cost+=r.Cost,t.Clicks+=r.Clicks,t.Impressions+=r.Impressions;t.CPC=t.Clicks?t.Cost/t.Clicks:0,t.CTR=t.Impressions!=0?100*t.Clicks/t.Impressions:0,s.campaignsTypesList[`${a}`]=t,s.campaignsTypesResult.Count+=t.Count,s.campaignsTypesResult.Cost+=t.Cost,s.campaignsTypesResult.Clicks+=t.Clicks,s.campaignsTypesResult.Impressions+=t.Impressions}s.campaignsTypesResult.CPC+=s.campaignsTypesResult.Clicks?s.campaignsTypesResult.Cost/s.campaignsTypesResult.Clicks:0,s.campaignsTypesResult.CTR+=s.campaignsTypesResult.Impressions!=0?100*s.campaignsTypesResult.Clicks/s.campaignsTypesResult.Impressions:0;for(const a of n){const t=s.campaignsTypesList[`${a}`];t.CostPerc=Number(100*t.Cost/s.campaignsTypesResult.Cost),t.ImpressionsPerc=Number(100*t.Impressions/s.campaignsTypesResult.Impressions),t.ClicksPerc=Number(100*t.Clicks/s.campaignsTypesResult.Clicks)}return s},lastDayValue(){const s=Array.from(this.vueStore.costsMap.values()).pop(),e=Object.values(s).pop();return String(e).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" ₽"},lastMonth(){const s=Array.from(this.vueStore.costsMap.keys()).pop(),e=Array.from(this.vueStore.costsMap.values()).pop();return console.debug(s,e),[s,e]},last10DaysValue(){const s=Array.from(this.vueStore.costsMap.values()).pop(),e=Object.values(s).pop(),n=Object.values(s).slice(-10),a=n.reduce((r,g)=>r+g)/n.length,t=String(a.toFixed(0)).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" ₽",o=(e-a)/a*100,c=String(o.toFixed(0)).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" %";return[t,c]},lastDayDelta(){const s=Array.from(this.vueStore.costsMap.values()).pop(),e=Object.values(s).pop(),n=Object.values(s).slice(-10),a=n.reduce((t,o)=>t+o)/n.length;return(e-a)/a*100},latsMonthValues(){const s=Array.from(this.vueStore.costsMap.values()).pop(),e=Object.values(s).slice(-10),n=e.reduce((t,o)=>t+o)/e.length,a={};console.debug(Object.keys(s).slice(-10));for(const t of Object.keys(s).slice(-10))a[`${t}`]=n;return console.debug(s),[{name:"Значения трат",data:s},{name:"Среднее значение трат зв 10 дней",data:a}]}},setup(){return{vueStore:window._vueStore}},methods:{getMonth(s){const e={"01":"Январь","02":"Февраль","03":"Март","04":"Апрель","05":"Май","06":"Июнь","07":"Июль","08":"Август","09":"Сентябрь",10:"Октябрь",11:"Ноябрь",12:"Декабрь"};return`${s}`in e?e[`${s}`]:""},getCampaignType(s){const e={TEXT_CAMPAIGN:"Текстово-графические объявления",UNIFIED_CAMPAIGN:"Единая перфоманс кампания",SMART_CAMPAIGN:"Смарт-баннеры",DYNAMIC_TEXT_CAMPAIGN:"Динамические объявления",MOBILE_APP_CAMPAIGN:"Реклама мобильных приложений",MCBANNER_CAMPAIGN:"Баннер на поиске",CPM_BANNER_CAMPAIGN:"Медийная кампания",CPM_DEALS_CAMPAIGN:"Медийная кампания со сделками",CPM_FRONTPAGE_CAMPAIGN:"Медийная кампания на Главной",CPM_PRICE:"Кампания с фиксированным СРМ"};return`${s}`in e?e[`${s}`]:""}}},$={key:0,class:"table"},x={class:"charts_table_wrapper"},G={class:"charts_table"},V={class:"last_day_coast"};function E(s,e,n,a,t,o){const c=p("line-chart");return a.vueStore.loading==!1?(l(),u("div",$,[i("div",x,[i("div",G,[C(c,{title:o.getMonth(o.lastMonth[0]),data:o.lastMonth[1],suffix:" ₽",thousands:" "},null,8,["title","data"])])]),i("div",V,"Траты за вчерашний день = "+m(o.lastDayValue),1)])):y("",!0)}const K=d(N,[["render",E],["__scopeId","data-v-68c6ca6d"]]),O={name:"CostTableTelegram",computed:{statistics(){const s={campaignsTypesList:{},campaignsTypesResult:{Count:0,Cost:0,Clicks:0,Impressions:0,CPC:0,CTR:0}},e=[];for(const[a,t]of this.vueStore.campaignsMap)e.push(t.CampaignType);const n=new Set(e);for(const a of n){const t={Type:a,Count:0,Cost:0,Clicks:0,Impressions:0,CPC:0,CTR:0},o=Array.from(this.vueStore.campaignsMap).filter(c=>c[1].CampaignType==a);for(const[c,r]of o)t.Count++,t.Cost+=r.Cost,t.Clicks+=r.Clicks,t.Impressions+=r.Impressions;t.CPC=t.Clicks?t.Cost/t.Clicks:0,t.CTR=t.Impressions!=0?100*t.Clicks/t.Impressions:0,s.campaignsTypesList[`${a}`]=t,s.campaignsTypesResult.Count+=t.Count,s.campaignsTypesResult.Cost+=t.Cost,s.campaignsTypesResult.Clicks+=t.Clicks,s.campaignsTypesResult.Impressions+=t.Impressions}s.campaignsTypesResult.CPC+=s.campaignsTypesResult.Clicks?s.campaignsTypesResult.Cost/s.campaignsTypesResult.Clicks:0,s.campaignsTypesResult.CTR+=s.campaignsTypesResult.Impressions!=0?100*s.campaignsTypesResult.Clicks/s.campaignsTypesResult.Impressions:0;for(const a of n){const t=s.campaignsTypesList[`${a}`];t.CostPerc=Number(100*t.Cost/s.campaignsTypesResult.Cost),t.ImpressionsPerc=Number(100*t.Impressions/s.campaignsTypesResult.Impressions),t.ClicksPerc=Number(100*t.Clicks/s.campaignsTypesResult.Clicks)}return s},lastDayValue(){const s=Array.from(this.vueStore.coastsAll.values()).pop();return String(s).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" ₽"},lastMonth(){const s=Array.from(this.vueStore.costsMap.keys()).pop(),e=Array.from(this.vueStore.costsMap.values()).pop();return console.debug(s,e),[s,e]},last10DaysValue(){const s=Array.from(this.vueStore.coastsAll.values()).pop(),e=Array.from(this.vueStore.coastsAll.values()).slice(-10),n=e.reduce((c,r)=>c+r)/e.length,a=String(n.toFixed(0)).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" ₽",t=(s-n)/n*100,o=String(t.toFixed(0)).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" %";return[a,o]},lastDayDelta(){const s=Array.from(this.vueStore.coastsAll.values()).pop(),e=Array.from(this.vueStore.coastsAll.values()).slice(-10),n=e.reduce((t,o)=>t+o)/e.length,a=(s-n)/n*100;return console.debug(a),a},latsMonthValues(){const s=Array.from(this.vueStore.costsMap.values()).pop(),e=Array.from(this.vueStore.coastsAll.values()).slice(-10),n=e.reduce((t,o)=>t+o)/e.length,a={};console.debug(Object.keys(s).slice(-10));for(const t of Object.keys(s).slice(-10))a[`${t}`]=n;return console.debug(s),[{name:"Значения трат",data:s},{name:"Среднее значение трат зв 10 дней",data:a}]}},setup(){return{vueStore:window._vueStore}},methods:{getMonth(s){const e={"01":"Январь","02":"Февраль","03":"Март","04":"Апрель","05":"Май","06":"Июнь","07":"Июль","08":"Август","09":"Сентябрь",10:"Октябрь",11:"Ноябрь",12:"Декабрь"};return`${s}`in e?e[`${s}`]:""},getCampaignType(s){const e={TEXT_CAMPAIGN:"Текстово-графические объявления",UNIFIED_CAMPAIGN:"Единая перфоманс кампания",SMART_CAMPAIGN:"Смарт-баннеры",DYNAMIC_TEXT_CAMPAIGN:"Динамические объявления",MOBILE_APP_CAMPAIGN:"Реклама мобильных приложений",MCBANNER_CAMPAIGN:"Баннер на поиске",CPM_BANNER_CAMPAIGN:"Медийная кампания",CPM_DEALS_CAMPAIGN:"Медийная кампания со сделками",CPM_FRONTPAGE_CAMPAIGN:"Медийная кампания на Главной",CPM_PRICE:"Кампания с фиксированным СРМ"};return`${s}`in e?e[`${s}`]:""}}},j={key:0,class:"table",style:{"box-shadow":"0px 0px 10px red inset",padding:"10px 0px","margin-bottom":"50px"}},L={class:"last_day_coast",style:{margin:"10px 0px 0px 10px"}},w={class:"last_day_coast",style:{margin:"10px 0px 0px 10px"}},B={class:"last_day_coast",style:{margin:"10px 0px 0px 10px"}};function F(s,e,n,a,t,o){const c=p("line-chart");return a.vueStore.loading==!1&&Math.abs(o.lastDayDelta)>20?(l(),u("div",j,[C(c,{title:o.getMonth(o.lastMonth[0]),data:o.latsMonthValues,suffix:" ₽",thousands:" "},null,8,["title","data"]),i("div",L,"Траты за вчерашний день = "+m(o.lastDayValue),1),i("div",w,"Среднее значение трат за 10 дней = "+m(o.last10DaysValue[0]),1),i("div",B,"Отклонение от среднего значения = "+m(o.last10DaysValue[1]),1)])):y("",!0)}const U=d(O,[["render",F],["__scopeId","data-v-d9ead65f"]]);export{K as C,q as T,U as a};
