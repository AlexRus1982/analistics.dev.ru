import{S as v,H as h}from"./SubGroupsTable-BNiOYjtS.js";import{_ as m,r as _,o as n,c as l,F as y,a as T,b as f,d as u,e as d,m as b,f as p,t as g,i as A}from"./app-DdKmYkMH.js";const I={name:"HubSubTable",components:{"sub-groups-table":v},computed:{hubGroups(){return Array.from(this.vueStore.groupsMap).filter(t=>t[1].parentGroupId=="-1").sort((t,c)=>t[1].groupOrder-c[1].groupOrder)}},setup(){return{vueStore:window._vueStore}}},S={key:0,class:"table"};function M(e,t,c,a,s,o){const r=_("sub-groups-table");return a.vueStore.loading==!1?(n(),l("div",S,[(n(!0),l(y,null,T(o.hubGroups,([i,C])=>(n(),f(r,{groupId:C.groupId},null,8,["groupId"]))),256))])):u("",!0)}const k=m(I,[["render",M],["__scopeId","data-v-15abb2b2"]]),$={name:"TableListTelegram",components:{"hub-table":h,"hub-sub-table":k}},P={class:"table_list_body"},R=b('<div class="table_header_wrapper" style="position:relative;top:0px;z-index:0;margin-top:30px;"><div class="table_header"><div class="table_header_item">Категория</div><div class="table_header_item">Расход с НДС</div><div class="table_header_item">Показов</div><div class="table_header_item">Кликов</div></div></div>',1);function N(e,t,c,a,s,o){const r=_("hub-table"),i=_("hub-sub-table");return n(),l("div",P,[d(r),R,d(i)])}const G=m($,[["render",N]]),w={name:"CostTableTelegram",computed:{statistics(){const e={campaignsTypesList:{},campaignsTypesResult:{Count:0,Cost:0,Clicks:0,Impressions:0,CPC:0,CTR:0}},t=[];for(const[a,s]of this.vueStore.campaignsMap)t.push(s.CampaignType);const c=new Set(t);for(const a of c){const s={Type:a,Count:0,Cost:0,Clicks:0,Impressions:0,CPC:0,CTR:0},o=Array.from(this.vueStore.campaignsMap).filter(r=>r[1].CampaignType==a);for(const[r,i]of o)s.Count++,s.Cost+=i.Cost,s.Clicks+=i.Clicks,s.Impressions+=i.Impressions;s.CPC=s.Clicks?s.Cost/s.Clicks:0,s.CTR=s.Impressions!=0?100*s.Clicks/s.Impressions:0,e.campaignsTypesList[`${a}`]=s,e.campaignsTypesResult.Count+=s.Count,e.campaignsTypesResult.Cost+=s.Cost,e.campaignsTypesResult.Clicks+=s.Clicks,e.campaignsTypesResult.Impressions+=s.Impressions}e.campaignsTypesResult.CPC+=e.campaignsTypesResult.Clicks?e.campaignsTypesResult.Cost/e.campaignsTypesResult.Clicks:0,e.campaignsTypesResult.CTR+=e.campaignsTypesResult.Impressions!=0?100*e.campaignsTypesResult.Clicks/e.campaignsTypesResult.Impressions:0;for(const a of c){const s=e.campaignsTypesList[`${a}`];s.CostPerc=Number(100*s.Cost/e.campaignsTypesResult.Cost),s.ImpressionsPerc=Number(100*s.Impressions/e.campaignsTypesResult.Impressions),s.ClicksPerc=Number(100*s.Clicks/e.campaignsTypesResult.Clicks)}return e},lastDayValue(){const e=Array.from(this.vueStore.costsMap.values()).pop(),t=Object.values(e).slice(-2,-1)[0];return String(t).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" ₽"},lastMonth(){const e=Array.from(this.vueStore.costsMap.keys()).pop(),t=Array.from(this.vueStore.costsMap.values()).pop();return console.debug(e,t),[e,t]}},setup(){return{vueStore:window._vueStore}},methods:{getMonth(e){const t={"01":"Январь","02":"Февраль","03":"Март","04":"Апрель","05":"Май","06":"Июнь","07":"Июль","08":"Август","09":"Сентябрь",10:"Октябрь",11:"Ноябрь",12:"Декабрь"};return`${e}`in t?t[`${e}`]:""},getCampaignType(e){const t={TEXT_CAMPAIGN:"Текстово-графические объявления",UNIFIED_CAMPAIGN:"Единая перфоманс кампания",SMART_CAMPAIGN:"Смарт-баннеры",DYNAMIC_TEXT_CAMPAIGN:"Динамические объявления",MOBILE_APP_CAMPAIGN:"Реклама мобильных приложений",MCBANNER_CAMPAIGN:"Баннер на поиске",CPM_BANNER_CAMPAIGN:"Медийная кампания",CPM_DEALS_CAMPAIGN:"Медийная кампания со сделками",CPM_FRONTPAGE_CAMPAIGN:"Медийная кампания на Главной",CPM_PRICE:"Кампания с фиксированным СРМ"};return`${e}`in t?t[`${e}`]:""}}},x={key:0,class:"table"},D={class:"charts_table_wrapper"},E={class:"charts_table"},L={class:"last_day_coast"};function B(e,t,c,a,s,o){const r=_("line-chart");return a.vueStore.loading==!1?(n(),l("div",x,[p("div",D,[p("div",E,[d(r,{title:o.getMonth(o.lastMonth[0]),data:o.lastMonth[1],suffix:" ₽",thousands:" "},null,8,["title","data"])])]),p("div",L,"Траты за вчерашний день = "+g(o.lastDayValue),1)])):u("",!0)}const O=m(w,[["render",B],["__scopeId","data-v-86222d10"]]),V={name:"TelegramAnalistics",components:{"table-list-all":G,"cost-table-telegram":O},setup(){const e=A(0),t=window._vueStore;return{activeTab:e,vueStore:t}},computed:{yesterday:function(){let e=new Date;return e.setDate(e.getDate()-1),e.toLocaleString("ru",{day:"numeric",month:"long",year:"numeric"})}},methods:{setActiveTab(e){this.activeTab=e},onPeriodChange(e){console.log(e.target.value),window._vueStore.setup(e.target.value)}}},F={class:"work_area"},H={class:"tabs_area"},j={class:"tabs_area_body_wrapper"},z={class:"tabs_area_body"},X={key:0},q={key:1,class:"block_title"},K={key:2},U=b('<div class="table_header_wrapper" style="position:relative;top:0px;z-index:0;"><div class="table_header"><div class="table_header_item">Категория</div><div class="table_header_item">Расход с НДС</div><div class="table_header_item">Показов</div><div class="table_header_item">Кликов</div></div></div>',1);function Y(e,t,c,a,s,o){const r=_("cost-table-telegram"),i=_("table-list-all");return n(),l("div",F,[p("div",H,[p("div",j,[p("div",z,[a.vueStore.loading==!1?(n(),l("div",X,[d(r)])):u("",!0),a.vueStore.loading==!1?(n(),l("div",q,"Данные за вчерашний день - "+g(o.yesterday),1)):u("",!0),a.vueStore.loading==!1?(n(),l("div",K,[U,d(i)])):u("",!0)])])])])}const W=m(V,[["render",Y]]);export{W as default};
