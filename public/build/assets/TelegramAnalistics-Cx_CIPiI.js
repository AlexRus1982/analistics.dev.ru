import{S as v,H as h}from"./SubGroupsTable-jkqt6NUT.js";import{_ as y,r as u,o as r,c as i,F as b,a as T,b as A,d,e as m,m as C,f as p,t as g,i as M}from"./app-CrD6XTDJ.js";const f={name:"HubSubTable",components:{"sub-groups-table":v},computed:{hubGroups(){return Array.from(this.vueStore.groupsMap).filter(t=>t[1].parentGroupId=="-1").sort((t,n)=>t[1].groupOrder-n[1].groupOrder)}},setup(){return{vueStore:window._vueStore}}},S={key:0,class:"table"};function I(s,t,n,a,e,o){const c=u("sub-groups-table");return a.vueStore.loading==!1?(r(),i("div",S,[(r(!0),i(b,null,T(o.hubGroups,([l,_])=>(r(),A(c,{groupId:_.groupId},null,8,["groupId"]))),256))])):d("",!0)}const k=y(f,[["render",I],["__scopeId","data-v-15abb2b2"]]),R={name:"TableListTelegram",components:{"hub-table":h,"hub-sub-table":k}},P={class:"table_list_body"},D=C('<div class="table_header_wrapper" style="position:relative;top:0px;z-index:0;margin-top:30px;"><div class="table_header"><div class="table_header_item">Категория</div><div class="table_header_item">Расход с НДС</div><div class="table_header_item">Показов</div><div class="table_header_item">Кликов</div></div></div>',1);function $(s,t,n,a,e,o){const c=u("hub-table"),l=u("hub-sub-table");return r(),i("div",P,[m(c),D,m(l)])}const N=y(R,[["render",$]]),x={name:"CostTableTelegram",computed:{statistics(){const s={campaignsTypesList:{},campaignsTypesResult:{Count:0,Cost:0,Clicks:0,Impressions:0,CPC:0,CTR:0}},t=[];for(const[a,e]of this.vueStore.campaignsMap)t.push(e.CampaignType);const n=new Set(t);for(const a of n){const e={Type:a,Count:0,Cost:0,Clicks:0,Impressions:0,CPC:0,CTR:0},o=Array.from(this.vueStore.campaignsMap).filter(c=>c[1].CampaignType==a);for(const[c,l]of o)e.Count++,e.Cost+=l.Cost,e.Clicks+=l.Clicks,e.Impressions+=l.Impressions;e.CPC=e.Clicks?e.Cost/e.Clicks:0,e.CTR=e.Impressions!=0?100*e.Clicks/e.Impressions:0,s.campaignsTypesList[`${a}`]=e,s.campaignsTypesResult.Count+=e.Count,s.campaignsTypesResult.Cost+=e.Cost,s.campaignsTypesResult.Clicks+=e.Clicks,s.campaignsTypesResult.Impressions+=e.Impressions}s.campaignsTypesResult.CPC+=s.campaignsTypesResult.Clicks?s.campaignsTypesResult.Cost/s.campaignsTypesResult.Clicks:0,s.campaignsTypesResult.CTR+=s.campaignsTypesResult.Impressions!=0?100*s.campaignsTypesResult.Clicks/s.campaignsTypesResult.Impressions:0;for(const a of n){const e=s.campaignsTypesList[`${a}`];e.CostPerc=Number(100*e.Cost/s.campaignsTypesResult.Cost),e.ImpressionsPerc=Number(100*e.Impressions/s.campaignsTypesResult.Impressions),e.ClicksPerc=Number(100*e.Clicks/s.campaignsTypesResult.Clicks)}return s},lastDayValue(){const s=Array.from(this.vueStore.costsMap.values()).pop(),t=Object.values(s).pop();return String(t).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" ₽"},lastMonth(){const s=Array.from(this.vueStore.costsMap.keys()).pop(),t=Array.from(this.vueStore.costsMap.values()).pop();return console.debug(s,t),[s,t]},last10DaysValue(){const s=Array.from(this.vueStore.costsMap.values()).pop(),t=Object.values(s).pop(),n=Object.values(s).slice(-10),a=n.reduce((l,_)=>l+_)/n.length,e=String(a.toFixed(0)).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" ₽",o=(t-a)/a*100,c=String(o.toFixed(0)).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" %";return[e,c]},lastDayDelta(){const s=Array.from(this.vueStore.costsMap.values()).pop(),t=Object.values(s).pop(),n=Object.values(s).slice(-10),a=n.reduce((e,o)=>e+o)/n.length;return(t-a)/a*100},latsMonthValues(){const s=Array.from(this.vueStore.costsMap.values()).pop(),t=Object.values(s).slice(-10),n=t.reduce((e,o)=>e+o)/t.length,a={};console.debug(Object.keys(s).slice(-10));for(const e of Object.keys(s).slice(-10))a[`${e}`]=n;return console.debug(s),[{name:"Значения трат",data:s},{name:"Среднее значение трат зв 10 дней",data:a}]}},setup(){return{vueStore:window._vueStore}},methods:{getMonth(s){const t={"01":"Январь","02":"Февраль","03":"Март","04":"Апрель","05":"Май","06":"Июнь","07":"Июль","08":"Август","09":"Сентябрь",10:"Октябрь",11:"Ноябрь",12:"Декабрь"};return`${s}`in t?t[`${s}`]:""},getCampaignType(s){const t={TEXT_CAMPAIGN:"Текстово-графические объявления",UNIFIED_CAMPAIGN:"Единая перфоманс кампания",SMART_CAMPAIGN:"Смарт-баннеры",DYNAMIC_TEXT_CAMPAIGN:"Динамические объявления",MOBILE_APP_CAMPAIGN:"Реклама мобильных приложений",MCBANNER_CAMPAIGN:"Баннер на поиске",CPM_BANNER_CAMPAIGN:"Медийная кампания",CPM_DEALS_CAMPAIGN:"Медийная кампания со сделками",CPM_FRONTPAGE_CAMPAIGN:"Медийная кампания на Главной",CPM_PRICE:"Кампания с фиксированным СРМ"};return`${s}`in t?t[`${s}`]:""}}},G={key:0,class:"table"},V={class:"charts_table_wrapper"},O={class:"charts_table"},w={class:"last_day_coast"};function E(s,t,n,a,e,o){const c=u("line-chart");return a.vueStore.loading==!1?(r(),i("div",G,[p("div",V,[p("div",O,[m(c,{title:o.getMonth(o.lastMonth[0]),data:o.lastMonth[1],suffix:" ₽",thousands:" "},null,8,["title","data"])])]),p("div",w,"Траты за вчерашний день = "+g(o.lastDayValue),1)])):d("",!0)}const j=y(x,[["render",E],["__scopeId","data-v-68c6ca6d"]]),L={name:"CostTableTelegram",computed:{statistics(){const s={campaignsTypesList:{},campaignsTypesResult:{Count:0,Cost:0,Clicks:0,Impressions:0,CPC:0,CTR:0}},t=[];for(const[a,e]of this.vueStore.campaignsMap)t.push(e.CampaignType);const n=new Set(t);for(const a of n){const e={Type:a,Count:0,Cost:0,Clicks:0,Impressions:0,CPC:0,CTR:0},o=Array.from(this.vueStore.campaignsMap).filter(c=>c[1].CampaignType==a);for(const[c,l]of o)e.Count++,e.Cost+=l.Cost,e.Clicks+=l.Clicks,e.Impressions+=l.Impressions;e.CPC=e.Clicks?e.Cost/e.Clicks:0,e.CTR=e.Impressions!=0?100*e.Clicks/e.Impressions:0,s.campaignsTypesList[`${a}`]=e,s.campaignsTypesResult.Count+=e.Count,s.campaignsTypesResult.Cost+=e.Cost,s.campaignsTypesResult.Clicks+=e.Clicks,s.campaignsTypesResult.Impressions+=e.Impressions}s.campaignsTypesResult.CPC+=s.campaignsTypesResult.Clicks?s.campaignsTypesResult.Cost/s.campaignsTypesResult.Clicks:0,s.campaignsTypesResult.CTR+=s.campaignsTypesResult.Impressions!=0?100*s.campaignsTypesResult.Clicks/s.campaignsTypesResult.Impressions:0;for(const a of n){const e=s.campaignsTypesList[`${a}`];e.CostPerc=Number(100*e.Cost/s.campaignsTypesResult.Cost),e.ImpressionsPerc=Number(100*e.Impressions/s.campaignsTypesResult.Impressions),e.ClicksPerc=Number(100*e.Clicks/s.campaignsTypesResult.Clicks)}return s},lastDayValue(){const s=Array.from(this.vueStore.coastsAll.values()).pop();return String(s).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" ₽"},lastMonth(){const s=Array.from(this.vueStore.costsMap.keys()).pop(),t=Array.from(this.vueStore.costsMap.values()).pop();return console.debug(s,t),[s,t]},last10DaysValue(){const s=Array.from(this.vueStore.coastsAll.values()).pop(),t=Array.from(this.vueStore.coastsAll.values()).slice(-10),n=t.reduce((c,l)=>c+l)/t.length,a=String(n.toFixed(0)).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" ₽",e=(s-n)/n*100,o=String(e.toFixed(0)).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" %";return[a,o]},lastDayDelta(){const s=Array.from(this.vueStore.costsMap.values()).pop(),t=Object.values(s).pop(),n=Object.values(s).slice(-10),a=n.reduce((e,o)=>e+o)/n.length;return(t-a)/a*100},latsMonthValues(){const s=Array.from(this.vueStore.costsMap.values()).pop(),t=Array.from(this.vueStore.coastsAll.values()).slice(-10),n=t.reduce((e,o)=>e+o)/t.length,a={};console.debug(Object.keys(s).slice(-10));for(const e of Object.keys(s).slice(-10))a[`${e}`]=n;return console.debug(s),[{name:"Значения трат",data:s},{name:"Среднее значение трат зв 10 дней",data:a}]}},setup(){return{vueStore:window._vueStore}},methods:{getMonth(s){const t={"01":"Январь","02":"Февраль","03":"Март","04":"Апрель","05":"Май","06":"Июнь","07":"Июль","08":"Август","09":"Сентябрь",10:"Октябрь",11:"Ноябрь",12:"Декабрь"};return`${s}`in t?t[`${s}`]:""},getCampaignType(s){const t={TEXT_CAMPAIGN:"Текстово-графические объявления",UNIFIED_CAMPAIGN:"Единая перфоманс кампания",SMART_CAMPAIGN:"Смарт-баннеры",DYNAMIC_TEXT_CAMPAIGN:"Динамические объявления",MOBILE_APP_CAMPAIGN:"Реклама мобильных приложений",MCBANNER_CAMPAIGN:"Баннер на поиске",CPM_BANNER_CAMPAIGN:"Медийная кампания",CPM_DEALS_CAMPAIGN:"Медийная кампания со сделками",CPM_FRONTPAGE_CAMPAIGN:"Медийная кампания на Главной",CPM_PRICE:"Кампания с фиксированным СРМ"};return`${s}`in t?t[`${s}`]:""}}},B={key:0,class:"table",style:{"box-shadow":"0px 0px 10px red inset",padding:"10px 0px","margin-bottom":"50px"}},F={class:"last_day_coast",style:{margin:"10px 0px 0px 10px"}},H={class:"last_day_coast",style:{margin:"10px 0px 0px 10px"}},X={class:"last_day_coast",style:{margin:"10px 0px 0px 10px"}};function q(s,t,n,a,e,o){const c=u("line-chart");return a.vueStore.loading==!1&&Math.abs(o.lastDayDelta)>10?(r(),i("div",B,[m(c,{title:o.getMonth(o.lastMonth[0]),data:o.latsMonthValues,suffix:" ₽",thousands:" "},null,8,["title","data"]),p("div",F,"Траты за вчерашний день = "+g(o.lastDayValue),1),p("div",H,"Среднее значение трат за 10 дней = "+g(o.last10DaysValue[0]),1),p("div",X,"Отклонение от среднего значения = "+g(o.last10DaysValue[1]),1)])):d("",!0)}const z=y(L,[["render",q],["__scopeId","data-v-9122ca1e"]]),K={name:"TelegramAnalistics",components:{"table-list-all":N,"cost-table-telegram":j,"cost-table-delta-telegram":z},setup(){const s=M(0),t=window._vueStore;return{activeTab:s,vueStore:t}},computed:{yesterday:function(){let s=new Date;return s.setDate(s.getDate()-1),s.toLocaleString("ru",{day:"numeric",month:"long",year:"numeric"})}},methods:{setActiveTab(s){this.activeTab=s},onPeriodChange(s){console.log(s.target.value),window._vueStore.setup(s.target.value)}}},U={class:"work_area"},Y={class:"tabs_area"},J={class:"tabs_area_body_wrapper"},Q={class:"tabs_area_body"},W={key:0},Z={key:1,class:"block_title"},ss={key:2},es=C('<div class="table_header_wrapper" style="position:relative;top:0px;z-index:0;"><div class="table_header"><div class="table_header_item">Категория</div><div class="table_header_item">Расход с НДС</div><div class="table_header_item">Показов</div><div class="table_header_item">Кликов</div></div></div>',1),ts={key:3};function as(s,t,n,a,e,o){const c=u("cost-table-telegram"),l=u("table-list-all"),_=u("cost-table-delta-telegram");return r(),i("div",U,[p("div",Y,[p("div",J,[p("div",Q,[a.vueStore.loading==!1?(r(),i("div",W,[m(c)])):d("",!0),a.vueStore.loading==!1?(r(),i("div",Z,"Данные за вчерашний день - "+g(o.yesterday),1)):d("",!0),a.vueStore.loading==!1?(r(),i("div",ss,[es,m(l)])):d("",!0),a.vueStore.loading==!1?(r(),i("div",ts,[m(_)])):d("",!0)])])])])}const cs=y(K,[["render",as]]);export{cs as default};
