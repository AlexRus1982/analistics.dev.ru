import{S as C,H as y}from"./SubGroupsTable-BUS1eAMO.js";import{_ as m,r as d,o as r,c as n,F as T,a as f,b as A,d as _,e as u,m as b,f as l,t as v,i as I,p as S,g as M}from"./app-m3eEc01u.js";const k={name:"HubSubTable",components:{"sub-groups-table":C},computed:{hubGroups(){return Array.from(this.vueStore.groupsMap).filter(t=>t[1].parentGroupId=="-1").sort((t,i)=>t[1].groupOrder-i[1].groupOrder)}},setup(){return{vueStore:window._vueStore}}},P={key:0,class:"table"};function R(e,t,i,a,s,o){const c=d("sub-groups-table");return a.vueStore.loading==!1?(r(),n("div",P,[(r(!0),n(T,null,f(o.hubGroups,([p,h])=>(r(),A(c,{groupId:h.groupId},null,8,["groupId"]))),256))])):_("",!0)}const $=m(k,[["render",R],["__scopeId","data-v-15abb2b2"]]),N={name:"TableListTelegram",components:{"hub-table":y,"hub-sub-table":$}},w={class:"table_list_body"},G=b('<div class="table_header_wrapper" style="position:relative;top:0px;z-index:0;margin-top:30px;"><div class="table_header"><div class="table_header_item">Категория</div><div class="table_header_item">Расход с НДС</div><div class="table_header_item">Показов</div><div class="table_header_item">Кликов</div></div></div>',1);function x(e,t,i,a,s,o){const c=d("hub-table"),p=d("hub-sub-table");return r(),n("div",w,[u(c),G,u(p)])}const D=m(N,[["render",x]]),E={name:"CostTableTelegram",computed:{statistics(){const e={campaignsTypesList:{},campaignsTypesResult:{Count:0,Cost:0,Clicks:0,Impressions:0,CPC:0,CTR:0}},t=[];for(const[a,s]of this.vueStore.campaignsMap)t.push(s.CampaignType);const i=new Set(t);for(const a of i){const s={Type:a,Count:0,Cost:0,Clicks:0,Impressions:0,CPC:0,CTR:0},o=Array.from(this.vueStore.campaignsMap).filter(c=>c[1].CampaignType==a);for(const[c,p]of o)s.Count++,s.Cost+=p.Cost,s.Clicks+=p.Clicks,s.Impressions+=p.Impressions;s.CPC=s.Clicks?s.Cost/s.Clicks:0,s.CTR=s.Impressions!=0?100*s.Clicks/s.Impressions:0,e.campaignsTypesList[`${a}`]=s,e.campaignsTypesResult.Count+=s.Count,e.campaignsTypesResult.Cost+=s.Cost,e.campaignsTypesResult.Clicks+=s.Clicks,e.campaignsTypesResult.Impressions+=s.Impressions}e.campaignsTypesResult.CPC+=e.campaignsTypesResult.Clicks?e.campaignsTypesResult.Cost/e.campaignsTypesResult.Clicks:0,e.campaignsTypesResult.CTR+=e.campaignsTypesResult.Impressions!=0?100*e.campaignsTypesResult.Clicks/e.campaignsTypesResult.Impressions:0;for(const a of i){const s=e.campaignsTypesList[`${a}`];s.CostPerc=Number(100*s.Cost/e.campaignsTypesResult.Cost),s.ImpressionsPerc=Number(100*s.Impressions/e.campaignsTypesResult.Impressions),s.ClicksPerc=Number(100*s.Clicks/e.campaignsTypesResult.Clicks)}return e},lastDayValue(){const e=Array.from(this.vueStore.costsMap.values()).pop(),t=Object.values(e).slice(-2,-1)[0];return String(t).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ")+" ₽"},lastMonth(){const e=Array.from(this.vueStore.costsMap.keys()).pop(),t=Array.from(this.vueStore.costsMap.values()).pop();return console.debug(e,t),[e,t]}},setup(){return{vueStore:window._vueStore}},methods:{getMonth(e){const t={"01":"Январь","02":"Февраль","03":"Март","04":"Апрель","05":"Май","06":"Июнь","07":"Июль","08":"Август","09":"Сентябрь",10:"Октябрь",11:"Ноябрь",12:"Декабрь"};return`${e}`in t?t[`${e}`]:""},getCampaignType(e){const t={TEXT_CAMPAIGN:"Текстово-графические объявления",UNIFIED_CAMPAIGN:"Единая перфоманс кампания",SMART_CAMPAIGN:"Смарт-баннеры",DYNAMIC_TEXT_CAMPAIGN:"Динамические объявления",MOBILE_APP_CAMPAIGN:"Реклама мобильных приложений",MCBANNER_CAMPAIGN:"Баннер на поиске",CPM_BANNER_CAMPAIGN:"Медийная кампания",CPM_DEALS_CAMPAIGN:"Медийная кампания со сделками",CPM_FRONTPAGE_CAMPAIGN:"Медийная кампания на Главной",CPM_PRICE:"Кампания с фиксированным СРМ"};return`${e}`in t?t[`${e}`]:""}}},L={key:0,class:"table"},B={class:"charts_table_wrapper"},z={class:"charts_table"},O={class:"last_day_coast"};function V(e,t,i,a,s,o){const c=d("line-chart");return a.vueStore.loading==!1?(r(),n("div",L,[l("div",B,[l("div",z,[u(c,{title:o.getMonth(o.lastMonth[0]),data:o.lastMonth[1],suffix:" ₽",thousands:" "},null,8,["title","data"])])]),l("div",O,"Траты за вчерашний день = "+v(o.lastDayValue),1)])):_("",!0)}const F=m(E,[["render",V],["__scopeId","data-v-86222d10"]]),H={name:"TelegramAnalistics",components:{"table-list-all":D,"cost-table-telegram":F},setup(){const e=I(0),t=window._vueStore;return{activeTab:e,vueStore:t}},computed:{yesterday:function(){let e=new Date;return e.setDate(e.getDate()-1),e.toLocaleString("ru",{day:"numeric",month:"long",year:"numeric"})}},methods:{setActiveTab(e){this.activeTab=e},onPeriodChange(e){console.log(e.target.value),window._vueStore.setup(e.target.value)}}},g=e=>(S("data-v-910b1755"),e=e(),M(),e),j={class:"work_area"},X={class:"tabs_area"},q={key:0,class:"pre_loader"},K=g(()=>l("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",fill:"currentColor",class:"bi bi-gear",viewBox:"0 0 16 16"},[l("path",{d:"M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492zM5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0z"}),l("path",{d:"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52l-.094-.319zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115l.094-.319z"})],-1)),U=g(()=>l("div",null,"Загрузка ...",-1)),Y=[K,U],J={class:"tabs_area_body_wrapper"},Q={class:"tabs_area_body"},W={key:0},Z={key:1,class:"block_title"},ee={key:2},se=b('<div class="table_header_wrapper" style="position:relative;top:0px;z-index:0;" data-v-910b1755><div class="table_header" data-v-910b1755><div class="table_header_item" data-v-910b1755>Категория</div><div class="table_header_item" data-v-910b1755>Расход с НДС</div><div class="table_header_item" data-v-910b1755>Показов</div><div class="table_header_item" data-v-910b1755>Кликов</div></div></div>',1);function te(e,t,i,a,s,o){const c=d("cost-table-telegram"),p=d("table-list-all");return r(),n("div",j,[l("div",X,[a.vueStore.loading==!0?(r(),n("div",q,Y)):_("",!0),l("div",J,[l("div",Q,[a.vueStore.loading==!1?(r(),n("div",W,[u(c)])):_("",!0),a.vueStore.loading==!1?(r(),n("div",Z,"Данные за вчерашний день - "+v(o.yesterday),1)):_("",!0),a.vueStore.loading==!1?(r(),n("div",ee,[se,u(p)])):_("",!0)])])])])}const ce=m(H,[["render",te],["__scopeId","data-v-910b1755"]]);export{ce as default};
